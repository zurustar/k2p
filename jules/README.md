# Kindle for Mac to PDF Converter (Go Version)

Mac 版 Kindle アプリの書籍をキャプチャして PDF に変換するツールです。Go言語で実装されています。

## 前提条件

*   macOS (Intel または Apple Silicon)
*   Go 1.21 以上 (ビルドする場合)
*   Kindle for Mac アプリ

## インストール

ソースコードからビルドする場合:

```bash
go build -o k2p ./cmd/k2p
```

または `go run` で直接実行することも可能です。

## 使い方

1.  ターミナルを開きます。
2.  Kindle アプリを開き、キャプチャしたい書籍を開きます。
3.  フルスクリーンモードにすることをお勧めします。
4.  以下のコマンドを実行します。

```bash
# 基本的な使い方 (output.pdf に保存、停止するまで無限にキャプチャ)
./k2p

# 出力ファイル名を指定
./k2p --output mybook.pdf

# ページ数を指定 (例: 100ページ)
./k2p --pages 100

# ページ送り方向を指定 (右開き/縦書きの本など、左キーで次へ)
# デフォルトは ltr (左から右、右キーで次へ)
./k2p --direction rtl

# PDFの最大サイズを指定 (デフォルト: 180MB)
./k2p --max-size 50MB
```

コマンドを実行すると、5秒間のカウントダウンが始まります。その間に Kindle ウィンドウをアクティブ（フォーカス）にしてください。マウスカーソルは邪魔にならない位置に移動させてください。

### オプション一覧

*   `--output`: 出力するPDFのファイル名 (デフォルト: "output.pdf")
*   `--temp-dir`: スクリーンショットを一時保存するディレクトリ (デフォルト: "screenshots")
*   `--pages`: キャプチャするページ数 (デフォルト: 0 = Ctrl+C で止めるまで無限)
*   `--direction`: ページ送りの方向。`ltr` (左から右) または `rtl` (右から左) (デフォルト: "ltr")
*   `--max-size`: 生成されるPDFの最大サイズ。これを超えると分割されます (例: "1.8MB", "100KB") (デフォルト: "180MB")

## 停止方法

ページ数を指定していない場合、または途中で止めたい場合は、ターミナルで `Ctrl+C` を押してください。
キャプチャが停止し、それまでに保存された画像からPDFが生成されます。

## 注意事項

*   このツールはスクリーンショットを使用するため、画面上の通知などが映り込む可能性があります。通知を切ることをお勧めします。
*   ページめくりのアニメーション時間を考慮して待機していますが、環境によっては調整が必要かもしれません。
*   私的利用の範囲内でご使用ください。
